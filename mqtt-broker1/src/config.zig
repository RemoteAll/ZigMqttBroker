const std = @import("std");

// ========================================================================
// 服务器配置
// ========================================================================
pub const PORT = 1883;
pub const KERNEL_BACKLOG = 128;

// ========================================================================
// 连接限制
// ========================================================================
pub const MAX_CONNECTIONS = 10000; // 最大并发连接数
pub const IO_ENTRIES = 256; // IO操作队列深度
pub const QUEUE_DEPTH = 256; // 传统队列深度(向后兼容)

// ========================================================================
// 内存池配置
// ========================================================================
pub const MAX_CLIENTS_POOL = 1024; // 客户端连接池大小(预热)
pub const MAX_MESSAGES_POOL = 1024; // 消息池大小

// ========================================================================
// 缓冲区大小
// ========================================================================
pub const READ_BUFFER_SIZE = 4096; // 读取缓冲区(4KB)
pub const WRITE_BUFFER_SIZE = 4096; // 写入缓冲区(4KB)
pub const MAXIMUM_MESSAGE_SIZE = 256 * 1024; // 最大消息256KB

// ========================================================================
// 客户端标识
// ========================================================================
pub const MAX_CLIENT_ID_LEN = 64;
pub const MAX_MESSAGE_LEN = 2048; // 向后兼容

// ========================================================================
// 超时配置
// ========================================================================
pub const KEEP_ALIVE_DEFAULT = 60; // 默认保活时间(秒)
pub const CONNECTION_TIMEOUT = 30; // 连接超时(秒)

// ========================================================================
// 会话过期配置（MQTT 5.0 特性，MQTT 3.1.1 使用默认值）
// ========================================================================
// MQTT 3.1.1 Clean Session = 0 时的默认会话过期时间（秒）
// 注意：MQTT 3.1.1 协议本身不支持 session_expiry_interval
// 这是服务器端的默认配置，防止会话无限期保留
pub const DEFAULT_SESSION_EXPIRY_SEC = 3600; // 1小时
pub const MAX_SESSION_EXPIRY_SEC = 86400; // 24小时（最大值）
pub const SESSION_EXPIRY_NEVER = 0xFFFFFFFF; // 永不过期（MQTT 5.0）

// ========================================================================
// 主题限制
// ========================================================================
pub const MAX_TOPIC_LENGTH = 256;
pub const MAX_TOPIC_LEVELS = 16;

// ========================================================================
// 监控配置
// ========================================================================
pub const STATS_PUBLISH_INTERVAL_SEC = 5; // 统计信息发布间隔(秒)
pub const STATS_INTERVAL_NS = STATS_PUBLISH_INTERVAL_SEC * std.time.ns_per_s; // 纳秒单位
